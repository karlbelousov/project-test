import{openSucces}from"./success.js";const modalOpenButtons=document.querySelectorAll(".open-modal-auth"),modalAuth=document.querySelector(".modal-auth"),modalAuthCancel=modalAuth.querySelector(".modal-auth__cancel"),modalAuthForm=modalAuth.querySelector(".modal-auth__form"),nameInput=modalAuthForm.querySelector("#name"),nameEmail=modalAuthForm.querySelector("#email"),phoneInput=modalAuthForm.querySelector("#phone-number"),formSubmitButton=modalAuthForm.querySelector(".modal-auth__button"),phoneMask=new IMask(phoneInput,{mask:"+{7}(000)000-00-00"}),pristine=new Pristine(modalAuthForm,{classTo:"modal-auth__group",errorClass:"modal-auth__group--invalid",errorTextParent:"modal-auth__group",errorTextClass:"modal-auth__error-text"});function openModalAuth(){modalAuth.classList.remove("hidden"),formSubmitButton.disabled=!0}function closeModalAuth(){modalAuth.classList.add("hidden"),modalAuthForm.reset(),pristine.reset()}function onKeyDownUp(e){"Escape"===e.key&&(e.preventDefault(),closeModalAuth())}function onInput(){pristine.validate()&&phoneMask.masked.isComplete?formSubmitButton.disabled=!1:formSubmitButton.disabled=!0}function onSubmitForm(e){e.preventDefault(),modalAuthForm.reset(),closeModalAuth(),setTimeout(openSucces,3e3)}modalOpenButtons.forEach((e=>{e.addEventListener("click",openModalAuth)})),modalAuthCancel.addEventListener("click",closeModalAuth),modalAuthForm.addEventListener("submit",onSubmitForm),document.addEventListener("keydown",onKeyDownUp),nameEmail.addEventListener("input",onInput),nameInput.addEventListener("input",onInput),phoneInput.addEventListener("input",onInput);